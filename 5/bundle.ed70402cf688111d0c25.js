!function(){"use strict";const e=["taxi","bus","train","ship","drive","flight","check-in","sightseeing","restaurant"],t=["everything","future","present","past"];function n(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function i(e,t,n="beforeend"){t.insertAdjacentElement(n,e.getElement())}const s=e=>"string"!=typeof e||0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1),l=e=>e.toISOString(),r=e=>e.toTimeString().slice(0,5),a=e=>e.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}).replace(",","").replace(/\//g,"/");class o{getTemplate(){return`\n    <form class="trip-filters" action="#" method="get">\n\n      ${t.map((e=>(e=>`\n    <div class="trip-filters__filter">\n      <input id="filter-${e}" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="${e}">\n      <label class="trip-filters__filter-label" for="filter-${e}">${s(e)}</label>\n    </div>\n`)(e))).join("")}\n\n      <button class="visually-hidden" type="submit">Accept filter</button>\n    </form>\n  `}getElement(){return this.element||(this.element=n(this.getTemplate())),this.element}removeElemtnt(){this.element=null}}class p{getTemplate(){return'\n    <form class="trip-events__trip-sort  trip-sort" action="#" method="get">\n      <div class="trip-sort__item  trip-sort__item--day">\n        <input id="sort-day" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-day" checked>\n        <label class="trip-sort__btn" for="sort-day">Day</label>\n      </div>\n\n      <div class="trip-sort__item  trip-sort__item--event">\n        <input id="sort-event" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-event" disabled>\n        <label class="trip-sort__btn" for="sort-event">Event</label>\n      </div>\n\n      <div class="trip-sort__item  trip-sort__item--time">\n        <input id="sort-time" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-time">\n        <label class="trip-sort__btn" for="sort-time">Time</label>\n      </div>\n\n      <div class="trip-sort__item  trip-sort__item--price">\n        <input id="sort-price" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-price">\n        <label class="trip-sort__btn" for="sort-price">Price</label>\n      </div>\n\n      <div class="trip-sort__item  trip-sort__item--offer">\n        <input id="sort-offer" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-offer" disabled>\n        <label class="trip-sort__btn" for="sort-offer">Offers</label>\n      </div>\n    </form>\n  '}getElement(){return this.element||(this.element=n(this.getTemplate())),this.element}removeElemtnt(){this.element=null}}class d{constructor(e,t){this.point=e,this.pointModel=t}getTemplate(){const e=this.point;return((e,t,n)=>{const{dateFrom:i,dateTo:s,basePrice:a,isFavorite:o,type:p}=e,d=o?"event__favorite-btn--active":"",c=n.map((e=>`\n      <li class="event__offer">\n        <span class="event__offer-title">${e.title}</span>\n        &plus;&euro;&nbsp;\n        <span class="event__offer-price">${e.price}</span>\n      </li>\n    `)).join(""),v=i.toLocaleDateString("en-US",{month:"short",day:"numeric"}),_=l(i),u=l(s),m=r(i),h=r(s);return`\n    <li class="trip-events__item">\n      <div class="event">\n        <time class="event__date" datetime="${_}">${v}</time>\n        <div class="event__type">\n          <img class="event__type-icon" width="42" height="42" src="img/icons/${p}.png" alt="Event type icon">\n        </div>\n        <h3 class="event__title">${p} ${t.name}</h3>\n        <div class="event__schedule">\n          <p class="event__time">\n            <time class="event__start-time" datetime="${_}">${m}</time>\n            &mdash;\n            <time class="event__end-time" datetime="${u}">${h}</time>\n          </p>\n          <p class="event__duration">30M</p>\n        </div>\n        <p class="event__price">\n          &euro;&nbsp;<span class="event__price-value">${a}</span>\n        </p>\n        <h4 class="visually-hidden">Offers:</h4>\n        <ul class="event__selected-offers">\n          ${c}\n        </ul>\n        <button class="event__favorite-btn ${d}" type="button">\n          <span class="visually-hidden">Add to favorite</span>\n          <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n            <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n          </svg>\n        </button>\n        <button class="event__rollup-btn" type="button">\n          <span class="visually-hidden">Open event</span>\n        </button>\n      </div>\n    </li>\n  `})(e,this.pointModel.getDestinationById(e.destinationId),this.pointModel.getOffersByType(e.type))}getElement(){return this.element||(this.element=n(this.getTemplate())),this.element}removeElement(){this.element=null}}class c{constructor(e,t){this.point=e,this.pointModel=t}getTemplate(){const t=this.point;return((t,n,i,l)=>{return`\n    <form class="event event--edit" action="#" method="post">\n      <header class="event__header">\n        <div class="event__type-wrapper">\n          <label class="event__type  event__type-btn" for="event-type-toggle-1">\n            <span class="visually-hidden">Choose event type</span>\n            <img class="event__type-icon" width="17" height="17" src="img/icons/${t.type}.png" alt="Event type icon">\n          </label>\n          <input class="event__type-toggle  visually-hidden" id="event-type-toggle-1" type="checkbox">\n\n          <div class="event__type-list">\n            <fieldset class="event__type-group">\n              <legend class="visually-hidden">Event type</legend>\n              ${e.map((e=>(e=>`\n    <div class="event__type-item">\n      <input id="event-type-${e}-1" class="event__type-input  visually-hidden" type="radio" name="event-type" value="${e}" ${void 0===e?"checked":""}>\n      <label class="event__type-label  event__type-label--${e}" for="event-type-${e}-1">${s(e)}</label>\n    </div>`)(e))).join("")}\n            </fieldset>\n          </div>\n        </div>\n\n        <div class="event__field-group  event__field-group--destination">\n          <label class="event__label  event__type-output" for="event-destination-1">\n            ${s(t.type)}\n          </label>\n          <input class="event__input event__input--destination" id="event-destination-1" type="text" name="event-destination"\n            value="${n.name}" list="destination-list-1">\n          <datalist id="destination-list-1">\n            ${l.map((e=>`<option value="${e.name}"></option>`)).join("")}\n          </datalist>\n        </div>\n\n        <div class="event__field-group  event__field-group--time">\n          <label class="visually-hidden" for="event-start-time-1">From</label>\n          <input class="event__input  event__input--time" id="event-start-time-1" type="text" name="event-start-time"\n            value="${a(t.dateFrom)}">\n          &mdash;\n          <label class="visually-hidden" for="event-end-time-1">To</label>\n          <input class="event__input  event__input--time" id="event-end-time-1" type="text" name="event-end-time" value="${a(t.dateTo)}">\n        </div>\n\n        <div class="event__field-group  event__field-group--price">\n          <label class="event__label" for="event-price-1">\n            <span class="visually-hidden">Price</span>\n            &euro;\n          </label>\n          <input class="event__input  event__input--price" id="event-price-1" type="text" name="event-price" value="${t.basePrice}">\n        </div>\n\n        <button class="event__save-btn  btn  btn--blue" type="submit">Save</button>\n        <button class="event__reset-btn" type="reset">Delete</button>\n        <button class="event__rollup-btn" type="button">\n          <span class="visually-hidden">Open event</span>\n        </button>\n      </header>\n      <section class="event__details">\n        ${((e,t)=>!t||t&&0===t.length?"":`\n    <section class="event__section  event__section--offers">\n      <h3 class="event__section-title  event__section-title--offers">Offers</h3>\n      <div class="event__available-offers">\n        ${t.map((t=>((e,t)=>`\n  <div class="event__offer-selector">\n    <input class="event__offer-checkbox  visually-hidden" id="event-offer-${e.id}-1" type="checkbox" name="event-offer-${e.id}" ${t}>\n    <label class="event__offer-label" for="event-offer-${e.id}-1">\n      <span class="event__offer-title">${e.title}</span>\n      &plus;&euro;&nbsp;\n      <span class="event__offer-price">${e.price}</span>\n    </label>\n  </div>`)(t,e.offerIds.includes(t.id)))).join("")}\n      </div>\n    </section>`)(t,i)}\n\n        <section class="event__section  event__section--destination">\n          <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n          <p class="event__destination-description">${n.description}</p>\n          ${r=n.pictures,r&&0!==r.length?`\n    <div class="event__photos-container">\n      <div class="event__photos-tape">\n        ${r.map((e=>`<img class="event__photo" src="${e.src}" alt="Event photo">`)).join("")}\n      </div>\n    </div>`:""}\n        </section>\n      </section>\n    </form>\n  `;var r})(t,this.pointModel.getDestinationById(t.destinationId),this.pointModel.getOffersByType(t.type),this.pointModel.getAllDestinations())}getElement(){return this.element||(this.element=n(this.getTemplate())),this.element}removeElement(){this.element=null}}class v{constructor(e,t){this.points=e,this.pointModel=t}getTemplate(){return e=this.points,t=this.pointModel,`\n    <ul class="trip-events__list">\n        ${e.map(((e,n)=>0===n?new c(e,t).getTemplate():new d(e,t).getTemplate())).join("")}\n    </ul>`;var e,t}getElement(){return this.element||(this.element=n(this.getTemplate())),this.element}removeElement(){this.element=null}}function _(){return Math.random().toString(36).substr(2,9)}function u(e){return Math.floor(Math.random()*e)}class m{constructor(){const{points:t,offers:n,destinations:i}=function(){const t=e.map((e=>({type:e,offers:Array.from({length:u(5)},(()=>({id:_(),title:`Offer for ${e}`,price:u(200)+10})))}))),n=function(){const e=["a true pearl","is a beautiful city","famous for its crowded street markets with the best street food","a perfect place to stay with a family","for those who value comfort and coziness","with a beautiful old town","a paradise","with an embankment of a mighty river as a centre of attraction","full of cozy canteens where you can try the best coffee","known for its vibrant nightlife and cultural scene"];return["Amsterdam","Barcelona","Berlin","Paris","Rome","London","Vienna","Prague","Madrid","Venice"].map((t=>({id:_(),name:t,description:`${t} - ${e[u(e.length)]}`,pictures:Array.from({length:u(7)},(()=>({src:`http://loremflickr.com/248/152?random=${Math.random()}`,description:`${t} photo`})))})))}(),i=function(t,n){return Array.from({length:10},(()=>{const i=e[u(e.length)],s=n[u(n.length)],l=t.filter((e=>e.type===i));return{id:_(),type:i,destinationId:s.id,dateFrom:new Date,dateTo:new Date(Date.now()+10*Math.random()*24*60*60*1e3),basePrice:u(1e3)+20,isFavorite:Math.random()>.5,offerIds:l.slice(0,u(l.length)).map((e=>e.id))}}))}(t,n);return{offers:t,destinations:n,points:i}}();this.points=t,this.offers=n,this.destinations=i}getDestinationById(e){return this.destinations.find((t=>t.id===e))}getOffersByType(e){return this.offers.find((t=>t.type===e))?.offers||[]}getAllDestinations(){return this.destinations}}const h=document.querySelector(".trip-main"),f=document.querySelector(".trip-events"),y=new class{constructor({tripMainContainer:e,tripEventsContainer:t}){this.tripMainContainer=e,this.tripEventsContainer=t,this.pointModel=new m,this.ListComponent=null,this.routePointComponents=[]}init(){this.renderFilters(),this.renderSort(),this.renderRouteList()}renderFilters(){const e=this.tripMainContainer.querySelector(".trip-controls__filters");i(new o,e)}renderSort(){i(new p,this.tripEventsContainer)}renderRouteList(){const e=this.pointModel.points;i(new v(e,this.pointModel),this.tripEventsContainer)}}({tripMainContainer:h,tripEventsContainer:f});y.init()}();
//# sourceMappingURL=bundle.ed70402cf688111d0c25.js.map